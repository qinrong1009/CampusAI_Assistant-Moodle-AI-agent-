# 校務系統 AI 助手 - 使用指南

## 🚀 完整使用流程

### 前置準備

1. **後端已啟動**
   ```bash
   cd backend
   source venv/bin/activate  # macOS/Linux
   python app.py
   ```

2. **Chrome 擴展已安裝**
   - 訪問 `chrome://extensions/`
   - 開啟開發者模式
   - 加載 `chrome-extension` 文件夾

---

## 📱 使用方式

### 方式 1: 快捷鍵啟動
- **Windows/Linux**: 按 `Alt+A`
- **macOS**: 按 `Command+Shift+A`
- 右側會彈出 AI 助手面板

### 方式 2: 點擊圖標啟動
- 點擊 Chrome 工具欄中的擴展圖標
- 點擊「啟動助手」按鈕

---

## 🎯 操作步驟

### 步驟 1: 拍攝截圖
```
1. 導航到校務系統頁面（例如：選課系統、成績查詢等）
2. 在 AI 助手面板中點擊「📸 截圖」按鈕
3. 等待截圖完成（應看到預覽圖像）
```

### 步驟 2: 輸入問題
```
1. 在「請輸入您的問題」文本框中輸入問題
2. 例如：「怎樣才能添加這個課程？」
3. 實時顯示字數統計（最多 500 字）
```

### 步驟 3: 提交並獲取回應
```
1. 點擊「發送」按鈕
2. 看到加載動畫（通常 2-5 秒）
3. AI 回應會顯示在下方區域
```

### 步驟 4: 查看或清除結果
```
1. 結果顯示後可以：
   - 閱讀完整回應
   - 點擊「清除」刪除結果
   - 點擊「重新截圖」更新頁面截圖
```

---

## 💬 常見問題示例

### 例 1: 選課問題
```
背景: 你在校務系統選課頁面看到錯誤

操作:
1. 截圖顯示錯誤的選課頁面
2. 輸入: "為什麼我無法添加這個課程？"
3. AI 會分析截圖並告訴你：
   - 錯誤原因（例如時間衝突）
   - 解決方案（例如改選其他時段）
```

### 例 2: 成績查詢
```
背景: 你不知道如何查看成績

操作:
1. 截圖學生首頁
2. 輸入: "怎樣查看我的成績？"
3. AI 會指導你：
   - 點擊哪個菜單
   - 選擇哪個選項
   - 如何查看詳細成績
```

### 例 3: 系統操作
```
背景: 你需要修改個人信息

操作:
1. 截圖個人資料頁面
2. 輸入: "如何修改我的聯絡電話？"
3. AI 會提供具體步驟
```

---

## ⚙️ 設定調整

### 訪問設定
1. 點擊彈窗右上角的「⚙️」按鈕
2. 設定面板會展開

### 可用設定

| 設定項 | 說明 | 默認值 |
|-------|------|--------|
| **API 網址** | 後端服務器地址 | `http://localhost:5000` |
| **AI 模型** | 選擇使用的 AI 模型 | `Qwen 2.5` |

### 更改 API 網址
```
1. 打開設定
2. 修改 "API 網址" 字段
3. 例如: http://192.168.1.100:5000
4. 點擊「保存設定」
```

### 選擇 AI 模型
```
1. 打開設定
2. 在「AI 模型」下拉菜單中選擇:
   - 🖥️ Ollama (本地 - 推薦) ⭐ NEW
   - ☁️ Qwen 2.5 (雲端，速度快)
   - ☁️ GPT-4V (雲端，精準度高)
   - ☁️ Claude 3 Vision (雲端，多功能)
3. 點擊「保存設定」

**模型詳解：**

#### Ollama (本地 - 推薦) ⭐
- **優點**：無需 API 密鑰，完全隱私，可離線使用，完全免費
- **缺點**：需要本地安裝 Ollama，首次回應較慢
- **使用場景**：校園內使用，注重隱私，想要離線功能
- **配置**：見 [OLLAMA_SETUP.md](OLLAMA_SETUP.md)

#### Qwen 2.5 (雲端)
- **優點**：速度快，成本低，理解力強
- **缺點**：需要網絡，需要 API 密鑰
- **使用場景**：需要快速回應，預算有限

#### GPT-4V (雲端)
- **優點**：精準度最高，視覺識別能力最強
- **缺點**：成本高，需要網絡
- **使用場景**：對準確度要求高

#### Claude 3 Vision (雲端)
- **優點**：理解能力全面，回應詳細
- **缺點**：成本中等，需要網絡
- **使用場景**：需要詳細分析
```

**推薦搭配方案：**

| 場景 | 推薦方案 |
|------|---------|
| 校園內 | Ollama（完全隱私） |
| 遠程辦公 | Qwen 2.5（備選 GPT-4V） |
| 離線使用 | Ollama（唯一選擇） |
| 重要任務 | GPT-4V（最精準） |
| 成本優化 | Qwen 2.5（最便宜） |

---

## 🔍 檢查系統狀態

### 驗證後端正常運行
```bash
# 在終端運行
curl http://localhost:5000/health

# 預期輸出:
{
  "status": "healthy",
  "version": "1.0.0",
  "timestamp": "2025-10-31T10:30:00.000000"
}
```

### 檢查可用模型
```bash
curl http://localhost:5000/api/models

# 輸出應該顯示配置的模型狀態，例如：
{
  "models": {
    "ollama": {
      "name": "Ollama (本地)",
      "status": "available",
      "model": "llava"
    },
    "qwen": {
      "name": "Qwen 2.5",
      "status": "unconfigured"
    },
    ...
  }
}
```

### Ollama 狀態檢查
```bash
# 檢查 Ollama 是否運行
curl http://localhost:11434/api/tags

# 如果返回模型列表，說明 Ollama 正常運行
```

---

## 🆘 常見問題

### Q: 我需要 API 密鑰嗎？
**A:** 如果使用 Ollama，不需要。如果使用雲端模型，需要。

### Q: Ollama 會上傳我的數據嗎？
**A:** 不會。Ollama 在本地運行，所有處理都在你的電腦上進行。

### Q: 離線可以使用嗎？
**A:** 只有 Ollama 支持完全離線使用。

### Q: 首次使用很慢是正常的嗎？
**A:** 是的。Ollama 首次加載模型需要時間，之後會更快。

### Q: 如何在遠程服務器上使用？
**A:** 修改設定中的 API 網址為服務器地址，例如 `http://192.168.x.x:5000`### 測試 API 端點
```bash
# 簡單測試
curl http://localhost:5000/api/test

# 輸出:
{
  "status": "success",
  "message": "校務系統 AI 助手後端正在運行"
}
```

---

## 🐛 常見問題

### Q: 截圖不顯示？
**A:** 
- 確保頁面完全加載
- 嘗試重新加載頁面（F5）
- 檢查瀏覽器控制台是否有錯誤

### Q: 提交後沒有回應？
**A:**
- 檢查後端是否運行：`curl localhost:5000/health`
- 檢查 API 密鑰是否正確設置
- 查看後端控制台的錯誤訊息

### Q: 回應不準確？
**A:**
- 截圖時確保包含完整的相關區域
- 問題表述要清楚具體
- 嘗試不同的 AI 模型

### Q: 怎樣切換 AI 模型？
**A:**
- 點擊彈窗右上角的設定按鈕
- 在「AI 模型」下拉菜單中選擇
- 點擊保存

### Q: 如何連接遠程服務器？
**A:**
- 確保遠程服務器 IP 和端口正確
- 在設定中修改 API 網址
- 例如：`http://192.168.1.100:5000`

---

## 💡 最佳實踐

1. **清晰的截圖**
   - 確保包含問題相關的界面區域
   - 避免截圖太寬鬆無關內容

2. **具體的問題**
   - 不要只問「怎樣？」
   - 明確說明具體遇到的問題或目標

3. **定期檢查**
   - 偶爾測試後端連接
   - 驗證 API 密鑰有效性

4. **模型選擇**
   - Qwen：最快速度
   - GPT-4V：最高精準度
   - Claude：最全面分析

---

## 📞 獲取幫助

- 查看 [常見問題](README.md#常見問題)
- 查看 [故障排除](SETUP.md#故障排除)
- 查看 [開發文檔](DEVELOPMENT.md)
- 查看 [快速開始](QUICKSTART.md)

---

**祝你使用愉快！🎉**
